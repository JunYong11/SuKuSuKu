<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Components / Cards - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/assets/img/favicon.png" rel="icon">
  <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.g.assets.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="/assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/assets/css/style.css" rel="stylesheet">

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.10.0/dist/fullcalendar.min.css" rel="stylesheet">

  <!-- jQuery (required for FullCalendar) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- 커스텀 스타일 -->
  <style>
    /* 탭 콘텐츠 내 챕터 목록 관련 스타일 */
    #chapters-container-N1,
    #chapters-container-N2,
    #chapters-container-N3,
    #chapters-container-N4,
    #chapters-container-N5 {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-top: 20px;
    }
    .chapter-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
      /* 기본: 작은 화면(모바일) - 한 행에 1개 */
      flex: 1 1 calc(100% - 20px);
      max-width: calc(100% - 20px);
    }
    /* 중간 화면(태블릿 등): 한 행에 2개 */
    @media (min-width: 576px) {
      .chapter-card {
        flex: 1 1 calc(50% - 20px);
        max-width: calc(50% - 20px);
      }
    }
    /* 큰 화면(데스크탑): 한 행에 3개 */
    @media (min-width: 992px) {
      .chapter-card {
        flex: 1 1 calc(33.33% - 20px);
        max-width: calc(33.33% - 20px);
      }
    }
    .chapter-card:hover {
      transform: scale(1.03);
    }
    .chapter-card h3 {
      margin-top: 0;
    }
    .chapter-card p {
      margin: 5px 0;
      color: #555;
    }
  </style>
</head>
<body>
<!-- Header 및 Sidebar (Thymeleaf 템플릿 사용) -->
<div th:replace="~{header.html}"></div>
<div th:replace="~{sidebar.html}"></div>

<main id="main" class="main">
  <div class="pagetitle">
    <h1>레벨 선택</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item active">레벨 선택</li>
        <li class="breadcrumb-item">즐겨찾기</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

  <!-- 카드 영역 -->
  <section class="section">
    <div class="container my-5">
      <div class="card">
        <div class="card-body">
          <!-- 레벨(탭) 메뉴 -->
          <ul class="nav nav-tabs d-flex" id="levelTabs" role="tablist">
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100 active" id="N1-tab" data-bs-toggle="tab" data-bs-target="#N1" type="button" role="tab" aria-controls="N1" aria-selected="true">N1</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100" id="N2-tab" data-bs-toggle="tab" data-bs-target="#N2" type="button" role="tab" aria-controls="N2" aria-selected="false">N2</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100" id="N3-tab" data-bs-toggle="tab" data-bs-target="#N3" type="button" role="tab" aria-controls="N3" aria-selected="false">N3</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100" id="N4-tab" data-bs-toggle="tab" data-bs-target="#N4" type="button" role="tab" aria-controls="N4" aria-selected="false">N4</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100" id="N5-tab" data-bs-toggle="tab" data-bs-target="#N5" type="button" role="tab" aria-controls="N5" aria-selected="false">N5</button>
            </li>
          </ul>
          <!-- 탭 콘텐츠 영역 -->
          <div class="tab-content pt-2" id="levelTabsContent">
            <!-- N1 탭 -->
            <div class="tab-pane fade show active" id="N1" role="tabpanel" aria-labelledby="N1-tab">
              <h2 class="text-center">챕터 목록 - N1</h2>
              <div id="chapters-container-N1">
                <!-- N1 챕터 카드들이 동적으로 생성됩니다 -->
              </div>
            </div>
            <!-- N2 탭 -->
            <div class="tab-pane fade" id="N2" role="tabpanel" aria-labelledby="N2-tab">
              <h2 class="text-center">챕터 목록 - N2</h2>
              <div id="chapters-container-N2">
                <!-- N2 챕터 카드들이 동적으로 생성됩니다 -->
              </div>
            </div>
            <!-- N3 탭 -->
            <div class="tab-pane fade" id="N3" role="tabpanel" aria-labelledby="N3-tab">
              <h2 class="text-center">챕터 목록 - N3</h2>
              <div id="chapters-container-N3">
                <!-- N3 챕터 카드들이 동적으로 생성됩니다 -->
              </div>
            </div>
            <!-- N4 탭 -->
            <div class="tab-pane fade" id="N4" role="tabpanel" aria-labelledby="N4-tab">
              <h2 class="text-center">챕터 목록 - N4</h2>
              <div id="chapters-container-N4">
                <!-- N4 챕터 카드들이 동적으로 생성됩니다 -->
              </div>
            </div>
            <!-- N5 탭 -->
            <div class="tab-pane fade" id="N5" role="tabpanel" aria-labelledby="N5-tab">
              <h2 class="text-center">챕터 목록 - N5</h2>
              <div id="chapters-container-N5">
                <!-- N5 챕터 카드들이 동적으로 생성됩니다 -->
              </div>
            </div>
          </div><!-- End 탭 콘텐츠 -->
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle (Popper 포함) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // 예시 데이터: 각 레벨별 챕터 개수 (실제 데이터에 따라 수정)
      const levelChapters = {
        N1: 3,
        N2: 2,
        N3: 4,
        N4: 1,
        N5: 5
      };

      // 선택한 레벨에 해당하는 챕터 목록을 생성하는 함수
      function loadChapters(level) {
        const container = document.getElementById(`chapters-container-${level}`);
        container.innerHTML = ''; // 기존 내용 초기화
        const chapterCount = levelChapters[level] || 0;
        for (let i = 1; i <= chapterCount; i++) {
          // 각 챕터는 누적 단어 50개씩 추가
          const cumulativeWords = i * 50;
          // 예시 회독 횟수: 단순히 10씩 증가
          const reviewCount = i * 10;
          // 챕터 카드 생성
          const card = document.createElement('div');
          card.className = 'chapter-card';
          card.innerHTML = `<h3>Chapter ${i}</h3>
                                <p>누적 단어 수: ${cumulativeWords}개</p>
                                <p>회독 횟수: ${reviewCount}회</p>`;
          // 챕터 카드 클릭 시 study페이지로 이동 (쿼리스트링에 level과 chapter 정보를 포함)
          card.addEventListener('click', function() {
            window.location.href = `study.html?level=${level}&chapter=${i}`;
          });
          container.appendChild(card);
        }
      }

      // 탭이 활성화될 때마다 해당 레벨의 챕터를 로드
      document.querySelectorAll('#levelTabs button').forEach(button => {
        button.addEventListener('shown.bs.tab', function (event) {
          const level = event.target.textContent.trim(); // 탭 텍스트가 레벨명 (예: "N1")
          loadChapters(level);
        });
      });

      // 페이지 로드 시 기본 활성 탭(N1)의 챕터를 로드
      loadChapters('N1');
    </script>
  </section>
</main>

<!-- Footer -->
<footer id="footer" class="footer">
  <div class="copyright">
    &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
  </div>
  <div class="credits">
    Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
  </div>
</footer><!-- End Footer -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<!-- Vendor JS Files -->
<script src="/assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/chart.js/chart.umd.js"></script>
<script src="/assets/vendor/echarts/echarts.min.js"></script>
<script src="/assets/vendor/quill/quill.js"></script>
<script src="/assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="/assets/vendor/tinymce/tinymce.min.js"></script>
<script src="/assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="/assets/js/main.js"></script>
</body>
</html>
